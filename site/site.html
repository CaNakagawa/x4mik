<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Nakagawa</title>
  <style>
    /* ===== Base do seu layout ===== */
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%;font-family:'Roboto',sans-serif;transition:background-color .3s,color .3s}
    body.dark{background:#000;color:#fff}
    body.light{background:#fff;color:#000}
    body{padding-top:25px}

    #bgCanvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1}

    nav{position:fixed;top:0;left:0;width:100%;background:rgba(0,0,0,.9);padding:1rem 1rem;display:flex;justify-content:space-between;align-items:center;z-index:10;transition:background-color .3s}
    nav.light{background:rgba(255,255,255,.9)}
    nav .logo{font-size:1.2rem;font-weight:bold;color:#fff;transition:color .3s}
    nav ul{list-style:none;display:flex;gap:2rem}
    nav ul li a{text-decoration:none;color:inherit;font-size:1rem;transition:color .3s}
    nav ul li a:hover{color:#0f0}
    .nav-underline{height:2px;background:#888;width:100%;position:fixed;top:40px;left:0;z-index:9}

    footer{position:fixed;bottom:0;left:0;width:100%;padding:1rem;text-align:center;background:rgba(0,0,0,.9);color:#fff;transition:background .3s, color .3s;z-index:9}
    footer.light{background:rgba(255,255,255,.9);color:#000}

    section{padding:2rem;display:none;padding-bottom:4.5rem} /* margem p/ footer fixo */
    section.visible{display:block}

    /* ===== Tools ===== */
    #toolsMenu{margin-bottom:1.25rem;display:flex;flex-direction:column;gap:1rem}
    .tool-option{cursor:pointer;padding:1rem;border:1px solid #0f0;border-radius:8px;text-align:center;transition:.25s}
    .tool-option:hover{background:#0f0;color:#000}
    #toolContent{padding:1rem;border:1px solid #888;border-radius:8px}

    /* ===== Lousa (escopo da se√ß√£o) ===== */
    #whiteboard .wb-wrap{display:grid;grid-template-rows:auto 1fr auto;min-height:calc(100dvh - 40px - 60px)} /* 40px barra, ~60px footer */
    #whiteboard .wb-top{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;padding:.5rem;background:#15171a;border:1px solid #0006;border-radius:10px;margin-bottom:.75rem}
    #whiteboard .wb-btn{padding:.45rem .65rem;border:1px solid #ffffff22;background:#ffffff12;color:#e8eaed;border-radius:.5rem;cursor:pointer;transition:.15s;display:inline-flex;gap:.35rem;align-items:center}
    #whiteboard .wb-btn:hover{background:#ffffff22}
    #whiteboard .wb-btn[data-active="true"]{background:#00e676;color:#003314;border-color:transparent}
    #whiteboard .wb-btn-danger{background:#3a1414;border-color:#ff000033}
    #whiteboard .wb-btn-danger:hover{background:#4a1616}
    #whiteboard .wb-sep{width:1px;height:26px;background:#ffffff26;margin:0 .25rem}
    #whiteboard .wb-swatch{width:22px;height:22px;border-radius:.35rem;border:1px solid #0006;cursor:pointer;outline:2px solid transparent;transition:.12s}
    #whiteboard .wb-swatch[data-selected="true"]{outline:2px solid #00e676}
    #whiteboard .wb-slider{accent-color:#00e676}
    #whiteboard .wb-stage{position:relative;background:#0b0c0f;border:1px solid #0008;border-radius:12px;box-shadow:0 6px 22px #0008, inset 0 1px 0 #fff1;overflow:hidden}
    #whiteboard canvas{display:block;width:100%;height:100%}
    #whiteboard .wb-grid{position:absolute;inset:0;pointer-events:none;background:
      linear-gradient(90deg,#ffffff08 1px,transparent 1px) 0 0/16px 16px,
      linear-gradient(#ffffff08 1px,transparent 1px) 0 0/16px 16px}
    #whiteboard .wb-marquee{position:absolute;border:1.5px dashed #4dabf7;background:#4dabf733;border-radius:.25rem;pointer-events:none;display:none}
    #whiteboard .wb-status{margin-top:.75rem;color:#9aa0a6;display:flex;justify-content:space-between;gap:.75rem;font-size:.92rem}

    /* util responsivo */
    @media (max-width:760px){
      #whiteboard .wb-status{flex-direction:column;gap:.4rem}
      nav ul{gap:1rem}
    }
  </style>
</head>
<body class="dark">
  <canvas id="bgCanvas"></canvas>

  <nav>
    <div class="logo">NAKA</div>
    <ul>
      <li><a href="#" data-section="about">Sobre Mim</a></li>
      <li><a href="#" data-section="cv">CV</a></li>
      <li><a href="#" data-section="blog">Blog</a></li>
      <li><a href="#" data-section="projects">Projetos</a></li>
      <li><a href="#" data-section="tools">Tools</a></li>
      <li><a href="#" data-section="whiteboard">Lousa</a></li><!-- NOVA ABA -->
      <li><a href="#" data-section="contact">Contato</a></li>
    </ul>
  </nav>
  <div class="nav-underline"></div>

  <!-- Se√ß√µes -->
  <section id="about" class="visible">
    <h1>Sobre Mim</h1>
    <p>Bem-vindo ao meu site pessoal! Aqui voc√™ encontrar√° informa√ß√µes sobre minha carreira, projetos e interesses.</p>
  </section>

  <section id="cv">
    <h2>CV</h2>
    <p>Confira meu curr√≠culo para saber mais sobre minha forma√ß√£o, experi√™ncia e habilidades.</p>
  </section>

  <section id="blog">
    <h2>Blog</h2>
    <p>Leia meus artigos sobre tecnologia, desenvolvimento pessoal e outros t√≥picos que me interessam.</p>
  </section>

  <section id="projects">
    <h2>Projetos</h2>
    <p>Aqui est√£o alguns dos projetos que trabalhei, com links para reposit√≥rios e demonstra√ß√µes.</p>
  </section>

  <section id="tools">
    <h2>Tools</h2>
    <div id="toolsMenu">
      <div class="tool-option" data-tool="userAgent">User Agent Info</div>
    </div>
    <div id="toolContent">Selecione uma ferramenta acima para ver os detalhes.</div>
  </section>

  <!-- Lousa integrada -->
  <section id="whiteboard">
    <h2>Lousa de Desenho</h2>
    <div class="wb-wrap">
      <div class="wb-top">
        <button class="wb-btn" id="wb-pen" data-active="true" title="Caneta (P)">üñäÔ∏è Caneta</button>
        <button class="wb-btn" id="wb-eraser" title="Borracha (E)">ü©π Borracha</button>
        <button class="wb-btn" id="wb-select" title="Sele√ß√£o (S)">üî≥ Sele√ß√£o</button>

        <div class="wb-sep"></div>
        <button class="wb-btn" id="wb-cut" title="Recortar (Ctrl+X)" disabled>‚úÇÔ∏è Recortar</button>
        <button class="wb-btn wb-btn-danger" id="wb-del" title="Deletar (Del)" disabled>üóëÔ∏è Deletar</button>
        <button class="wb-btn" id="wb-paste" title="Colar (Ctrl+V)" disabled>üìã Colar</button>

        <div class="wb-sep"></div>
        <span style="opacity:.75">Cor:</span>
        <div class="wb-swatch" data-color="#000000" style="background:#000" data-selected="true"></div>
        <div class="wb-swatch" data-color="#e53935" style="background:#e53935"></div>
        <div class="wb-swatch" data-color="#1e88e5" style="background:#1e88e5"></div>
        <div class="wb-swatch" data-color="#43a047" style="background:#43a047"></div>
        <div class="wb-swatch" data-color="#fdd835" style="background:#fdd835"></div>
        <div class="wb-swatch" data-color="#ffffff" style="background:#fff;border-color:#0003"></div>

        <div class="wb-sep"></div>
        <span style="opacity:.75">Espessura:</span>
        <input id="wb-size" class="wb-slider" type="range" min="1" max="48" value="5">

        <div class="wb-sep"></div>
        <button class="wb-btn" id="wb-undo" title="Desfazer (Ctrl+Z)">‚Ü∂ Desfazer</button>
        <button class="wb-btn" id="wb-redo" title="Refazer (Ctrl+Shift+Z)">‚Ü∑ Refazer</button>
        <button class="wb-btn" id="wb-save" title="Salvar PNG">üíæ Salvar</button>
        <button class="wb-btn wb-btn-danger" id="wb-clear" title="Limpar tudo">üßπ Limpar</button>
      </div>

      <div class="wb-stage" id="wb-stage">
        <div class="wb-grid"></div>
        <canvas id="wb-canvas"></canvas>
        <div id="wb-marquee" class="wb-marquee"></div>
      </div>

      <div class="wb-status">
        <div>Ferramenta: <strong id="wb-tool-label">Caneta</strong> ‚Ä¢ Cor: <strong id="wb-color-label">#000000</strong> ‚Ä¢ Tamanho: <strong id="wb-size-label">5px</strong></div>
        <div>
          <span style="opacity:.75">Atalhos:</span> P (Caneta), E (Borracha), S (Sele√ß√£o), Ctrl+Z (Desfazer), Ctrl+Shift+Z (Refazer)
        </div>
      </div>
    </div>
  </section>

  <section id="contact">
    <h2>Contato</h2>
    <p>Entre em contato comigo por e-mail ou atrav√©s das minhas redes sociais. Ficarei feliz em conversar!</p>
  </section>

  <footer><p>.</p></footer>

  <script>
    /* ===== Fundo de estrelas (mantido) ===== */
    const canvasBG = document.getElementById("bgCanvas");
    const ctxBG = canvasBG.getContext("2d");
    function resizeBG(){canvasBG.width=innerWidth;canvasBG.height=innerHeight}
    resizeBG();
    let stars=[]; class Star{constructor(){this.x=Math.random()*canvasBG.width;this.y=Math.random()*canvasBG.height;this.r=Math.random()*1.5;this.vx=(Math.random()-.5)*.5;this.vy=(Math.random()-.5)*.5}
      d(){ctxBG.beginPath();ctxBG.arc(this.x,this.y,this.r,0,Math.PI*2);ctxBG.fillStyle="rgba(255,255,255,.8)";ctxBG.fill()}
      u(){this.x+=this.vx;this.y+=this.vy;if(this.x<0||this.x>canvasBG.width)this.vx*=-1;if(this.y<0||this.y>canvasBG.height)this.vy*=-1;this.d()}}
    function mkStars(){stars=[];for(let i=0;i<200;i++)stars.push(new Star())}
    function loopBG(){ctxBG.clearRect(0,0,canvasBG.width,canvasBG.height);stars.forEach(s=>s.u());requestAnimationFrame(loopBG)}
    addEventListener("resize",()=>{resizeBG();mkStars()});
    mkStars();loopBG();

    /* ===== Navega√ß√£o por se√ß√µes ===== */
    document.querySelectorAll("nav ul li a").forEach(link=>{
      link.addEventListener("click",(e)=>{
        e.preventDefault();
        const id = link.getAttribute("data-section");
        document.querySelectorAll("section").forEach(s=>s.classList.remove("visible"));
        const el = document.getElementById(id);
        if(el){el.classList.add("visible"); if(id==='whiteboard'){ensureWhiteboardSized()} }
      });
    });

    /* ===== Tools: User Agent Info ===== */
    document.querySelectorAll(".tool-option").forEach(opt=>{
      opt.addEventListener("click",(e)=>{
        const k = e.currentTarget.getAttribute("data-tool");
        const out = document.getElementById("toolContent");
        if(k==="userAgent"){
          const ua = navigator.userAgent;
          const plat = navigator.platform;
          const lang = navigator.language;
          const cookies = navigator.cookieEnabled;
          const sw = screen.width, sh = screen.height, depth = screen.colorDepth;
          const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
          const online = navigator.onLine?"Online":"Offline";
          const touch = navigator.maxTouchPoints ?? "N/D";
          out.innerHTML = `
            <h3>Informa√ß√µes do User Agent</h3>
            <ul>
              <li><strong>User Agent:</strong> ${ua}</li>
              <li><strong>Plataforma:</strong> ${plat}</li>
              <li><strong>Idioma:</strong> ${lang}</li>
              <li><strong>Cookies habilitados:</strong> ${cookies}</li>
              <li><strong>Resolu√ß√£o de tela:</strong> ${sw} x ${sh}</li>
              <li><strong>Profundidade de cor:</strong> ${depth} bits</li>
              <li><strong>Fuso hor√°rio:</strong> ${tz}</li>
              <li><strong>Status da rede:</strong> ${online}</li>
              <li><strong>Pontos de toque:</strong> ${touch}</li>
            </ul>`;
        }
      });
    });

    /* ===== Lousa (inicializa√ß√£o dentro da se√ß√£o) ===== */
    const wb = {
      canvas: document.getElementById('wb-canvas'),
      stage:  document.getElementById('wb-stage'),
      marquee:document.getElementById('wb-marquee'),
      ctx: null,
      tool:'pen', color:'#000000', size:5,
      drawing:false, last:{x:0,y:0},
      selecting:false, selection:null, clip:null,
      undo:[], redo:[]
    };

    function ensureWhiteboardSized(){
      // Ajusta canvas para caber na √°rea vis√≠vel da se√ß√£o
      const rect = wb.stage.getBoundingClientRect();
      wb.canvas.width  = Math.max(300, rect.width);
      // Altura: se√ß√£o menos status (~56) e margens internas
      wb.canvas.height = Math.max(300, rect.height);
    }

    function wbSnapshot(){
      wb.redo.length=0;
      try{ wb.undo.push(wb.canvas.toDataURL('image/png')); if(wb.undo.length>40) wb.undo.shift(); }catch{}
    }
    function wbRestore(url){
      const img=new Image();
      img.onload=()=>{wb.ctx.clearRect(0,0,wb.canvas.width,wb.canvas.height);wb.ctx.drawImage(img,0,0)};
      img.src=url;
    }
    function wbSetTool(t){
      wb.tool=t;
      document.getElementById('wb-pen').dataset.active = (t==='pen');
      document.getElementById('wb-eraser').dataset.active = (t==='eraser');
      document.getElementById('wb-select').dataset.active = (t==='select');
      document.getElementById('wb-tool-label').textContent = t==='pen'?'Caneta':t==='eraser'?'Borracha':'Sele√ß√£o';
      if(t!=='select'){wbHideMarquee();wbEnableSel(false)}
    }
    function wbSetColor(c){
      wb.color=c; document.getElementById('wb-color-label').textContent=c;
      document.querySelectorAll('#whiteboard .wb-swatch').forEach(s=>s.dataset.selected='false');
      const active=[...document.querySelectorAll('#whiteboard .wb-swatch')].find(s=>s.dataset.color===c);
      if(active) active.dataset.selected='true';
    }
    function wbSetSize(v){ wb.size=+v; document.getElementById('wb-size-label').textContent=v+'px' }
    function wbShowMarquee(x,y,w,h){
      wb.marquee.style.display='block';
      wb.marquee.style.left = Math.min(x, x+w)+'px';
      wb.marquee.style.top  = Math.min(y, y+h)+'px';
      wb.marquee.style.width = Math.abs(w)+'px';
      wb.marquee.style.height= Math.abs(h)+'px';
    }
    function wbHideMarquee(){ wb.marquee.style.display='none' }
    function wbEnableSel(has){ 
      document.getElementById('wb-cut').disabled=!has;
      document.getElementById('wb-del').disabled=!has;
    }

    function wbInitOnce(){
      if(wb.ctx) return; // j√° inicializado
      wb.ctx = wb.canvas.getContext('2d');
      wb.ctx.lineJoin='round'; wb.ctx.lineCap='round';
      ensureWhiteboardSized(); wbSnapshot(); wbSetTool('pen'); wbSetColor('#000000'); wbSetSize(5);
    }
    wbInitOnce(); // permite redimensionar j√° na 1¬™ visita se for a primeira se√ß√£o

    // Redimensiona ao trocar para a aba Lousa e ao redimensionar janela
    window.addEventListener('resize', ensureWhiteboardSized);

    // Ferramentas
    document.getElementById('wb-pen').onclick   = ()=>wbSetTool('pen');
    document.getElementById('wb-eraser').onclick= ()=>wbSetTool('eraser');
    document.getElementById('wb-select').onclick= ()=>wbSetTool('select');

    document.getElementById('wb-size').addEventListener('input',(e)=>wbSetSize(e.target.value));
    document.querySelectorAll('#whiteboard .wb-swatch').forEach(s=>{
      s.addEventListener('click',()=>wbSetColor(s.dataset.color))
    });

    // Desenho & Sele√ß√£o
    wb.canvas.addEventListener('pointerdown',(e)=>{
      const r=wb.canvas.getBoundingClientRect(); const x=e.clientX-r.left, y=e.clientY-r.top;
      if(wb.tool==='pen'||wb.tool==='eraser'){
        wbSnapshot();
        wb.drawing=true; wb.last={x,y};
        wb.ctx.strokeStyle = (wb.tool==='eraser')?'rgba(0,0,0,1)':wb.color;
        wb.ctx.globalCompositeOperation = (wb.tool==='eraser')?'destination-out':'source-over';
        wb.ctx.lineWidth = wb.size;
        wb.ctx.beginPath(); wb.ctx.moveTo(x,y);
      }else if(wb.tool==='select'){
        wb.selecting=true; wb.selection={x,y,w:0,h:0}; wbShowMarquee(x,y,0,0); wbEnableSel(true);
      }
    });
    wb.canvas.addEventListener('pointermove',(e)=>{
      const r=wb.canvas.getBoundingClientRect(); const x=e.clientX-r.left, y=e.clientY-r.top;
      if(wb.drawing){ wb.ctx.lineTo(x,y); wb.ctx.stroke(); wb.last={x,y}; }
      else if(wb.selecting&&wb.selection){ wb.selection.w=x-wb.selection.x; wb.selection.h=y-wb.selection.y; wbShowMarquee(wb.selection.x,wb.selection.y,wb.selection.w,wb.selection.h); }
    });
    wb.canvas.addEventListener('pointerup',()=>{
      if(wb.drawing){ wb.ctx.closePath(); wb.ctx.globalCompositeOperation='source-over'; }
      wb.drawing=false;
      if(wb.selecting){
        wb.selecting=false;
        const ok = Math.abs(wb.selection.w)>2 && Math.abs(wb.selection.h)>2;
        if(!ok){ wbHideMarquee(); wb.selection=null; wbEnableSel(false); }
      }
    });

    // Recortar / Deletar / Colar
    function normRect(sel){ const x=sel.w<0?sel.x+sel.w:sel.x; const y=sel.h<0?sel.y+sel.h:sel.y; return {x,y,w:Math.abs(sel.w),h:Math.abs(sel.h)} }
    document.getElementById('wb-cut').onclick=()=>{
      if(!wb.selection) return;
      wbSnapshot();
      const r=normRect(wb.selection);
      wb.clip = wb.ctx.getImageData(r.x,r.y,r.w,r.h);
      wb.ctx.clearRect(r.x,r.y,r.w,r.h);
      document.getElementById('wb-paste').disabled=false;
      wbHideMarquee(); wb.selection=null; wbEnableSel(false);
    };
    document.getElementById('wb-del').onclick=()=>{
      if(!wb.selection) return;
      wbSnapshot();
      const r=normRect(wb.selection);
      wb.ctx.clearRect(r.x,r.y,r.w,r.h);
      wbHideMarquee(); wb.selection=null; wbEnableSel(false);
    };
    document.getElementById('wb-paste').onclick=()=>{
      if(!wb.clip) return;
      wbSnapshot();
      const px=(wb.canvas.width - wb.clip.width)/2;
      const py=(wb.canvas.height- wb.clip.height)/2;
      wb.ctx.putImageData(wb.clip,px,py);
    };

    // Desfazer/Refazer
    document.getElementById('wb-undo').onclick=()=>{
      if(!wb.undo.length) return;
      const last=wb.undo.pop(); wb.redo.push(wb.canvas.toDataURL('image/png')); wbRestore(last);
    };
    document.getElementById('wb-redo').onclick=()=>{
      if(!wb.redo.length) return;
      const img=wb.redo.pop(); wb.undo.push(wb.canvas.toDataURL('image/png')); wbRestore(img);
    };

    // Salvar / Limpar
    document.getElementById('wb-save').onclick=()=>{
      const a=document.createElement('a'); a.download=`lousa-${Date.now()}.png`; a.href=wb.canvas.toDataURL('image/png'); a.click();
    };
    document.getElementById('wb-clear').onclick=()=>{
      wbSnapshot(); wb.ctx.clearRect(0,0,wb.canvas.width,wb.canvas.height);
    };

    // Atalhos
    window.addEventListener('keydown',(e)=>{
      if(e.key==='p'||e.key==='P') wbSetTool('pen');
      if(e.key==='e'||e.key==='E') wbSetTool('eraser');
      if(e.key==='s'||e.key==='S') wbSetTool('select');
      if((e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==='z'&&!e.shiftKey){e.preventDefault();document.getElementById('wb-undo').click()}
      if((e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==='z'&& e.shiftKey){e.preventDefault();document.getElementById('wb-redo').click()}
      if((e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==='x'){e.preventDefault();document.getElementById('wb-cut').click()}
      if((e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==='v'){e.preventDefault();document.getElementById('wb-paste').click()}
      if(e.key==='Delete'){e.preventDefault();document.getElementById('wb-del').click()}
    });

    // Mostra a se√ß√£o "Sobre Mim" inicialmente (j√° est√° .visible no HTML)
  </script>
</body>
</html>
